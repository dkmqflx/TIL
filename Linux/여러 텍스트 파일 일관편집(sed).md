
## Ch6. 여러 텍스트 파일 일괄 편집(sed)

- sed
    - Stream EDitor
    - 텍스트 편집용 도구
    - vim과 같이 텍스트 파일 내용을 표시하면서 대화식으로 편집하는 스크린 데이터와 달리 
    - 스크림 데이터는 대화식이 아니라 텍스트를 어떻게 편집하는 가는 명령줄 옵션으로 지정해서 지시한다 

```

# vim 명령어로 일괄치환

:%s/치환전 문자열/치환후 문자열/

# sed 옵션으로 일괄치환

$ sed -e "s/치환전 문자열/친환후 문자열/"


# 치환전이나 치환후 문자에 /가 퐇ㅁ되면 구분자를 바꿔서 ;치환전;치환후; 처럼 사용


$ sed [옵션] 스크립트 입력파일1 [입력파일2 ... ]


$ cat sample.txt | sed -e "s/반환중/회수완료/" > sample.txt.updated


$ cat sample.txt | sed -e "s/반환중/회수완료/" > sample.txt
# 다음과 같이 원래와 같은 파일을 지정해서 출력하면 같은 파일을 동시에 조작하려고 하기 때문에 충돌이 발생한다 


```

- 충돌 방지하기 위해 원래 파일을 미리 다른 이름으로 변경해 두는 방법을 사용한다 

```
$ source = /tmp/sample.csv
$ backup = ${source}/${date +%Y-%m-%d).bak # 날짜를 파일명에 적으면 다중 백업으로 이용가능 

$ mv $source $backup

cat $backup | sed -e "s/반환중/회수완료/" > $source # 입력하는 것과 다른 파일이므로 내용이 사라지지 앙ㄴㅎ음 
```
